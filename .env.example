# Vivian Cosmetic Shop - Backend Environment Variables
# Copy this file to .env and update values

# Flask Configuration
FLASK_ENV=development
DEBUG=True
SECRET_KEY=vivian-cosmetic-shop-secret-key-change-in-production
JWT_SECRET_KEY=vivian-jwt-secret-key-change-in-production

# ------------------------------------------------------------
# Database
#
# Option A (recommended for Render Postgres): set DATABASE_URL
#   - Local dev: use Render "External Database URL"
#   - Render-hosted backend: use Render "Internal Database URL"
#
# Example:
# DATABASE_URL=postgresql://user:pass@host:5432/dbname?sslmode=require
#
# If DATABASE_URL is set, the backend will use Postgres.
# If not set, it will fall back to MySQL (XAMPP) DB_* settings below.
# ------------------------------------------------------------
DATABASE_URL=

# MySQL Database (XAMPP)
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASSWORD=
DB_NAME=vivian_cosmetic_shop

# Server
PORT=5000

# CORS
CORS_ORIGINS=*

# ------------------------------------------------------------
# PayMongo (QRPh) - keep secret keys in backend ONLY
#
# PAYMONGO_SECRET_KEY is required to generate QRPh codes.
# NEVER put secret keys in Flutter apps.
# ------------------------------------------------------------
PAYMONGO_SECRET_KEY=
PAYMONGO_PUBLIC_KEY=
 
# Public HTTPS base URL (required for hosted checkout redirects). Example (ngrok):
# PUBLIC_HTTPS_BASE_URL=https://your-subdomain.ngrok-free.dev
PUBLIC_HTTPS_BASE_URL=

# Optional: included in QRPh generate attributes if set
PAYMONGO_QRPH_MOBILE_NUMBER=
PAYMONGO_QRPH_NOTES=

# Webhook signing secret (from PayMongo Dashboard when you create a webhook endpoint)
# Required for auto-continue after payment (payment.paid / qrph.expired events)
PAYMONGO_WEBHOOK_SECRET=

# ------------------------------------------------------------
# OTP SMS Provider
#
# Recommended: Twilio Verify
#   - Set OTP_SMS_PROVIDER_MODE=twilio_verify
#   - Fill in TWILIO_* vars below
#
# Alternative: RapidAPI D7SMS or any provider
#
# How to fill these:
# 1) In RapidAPI, open the *Send SMS* or *Verify (2FA)* endpoint you want.
# 2) Copy the "Request URL" into OTP_SMS_URL.
# 3) Copy required headers (X-RapidAPI-Key, X-RapidAPI-Host, etc.) into
#    OTP_SMS_HEADERS_JSON as JSON.
# 4) Build the JSON body in OTP_SMS_BODY_TEMPLATE_JSON and use placeholders:
#    {phone} and {otp}
#
# IMPORTANT: Do NOT commit real keys.
# ------------------------------------------------------------
OTP_SMS_URL=
OTP_SMS_METHOD=POST
OTP_SMS_COUNTRY_CODE=63
OTP_SMS_E164_PLUS=true
OTP_SMS_HEADERS_JSON={"X-RapidAPI-Key":"<your_key>","X-RapidAPI-Host":"d7sms.p.rapidapi.com"}
OTP_SMS_BODY_TEMPLATE_JSON={"to":"{phone}","message":"Your Vivian Loyalty OTP is {otp}. It expires in 5 minutes."}

# If you insist on RapidAPI `sms-verify3` (Glavier), their send endpoint example body is target-only:
# OTP_SMS_URL=https://sms-verify3.p.rapidapi.com/send-numeric-verify
# OTP_SMS_HEADERS_JSON={"Content-Type":"application/json","x-rapidapi-host":"sms-verify3.p.rapidapi.com","x-rapidapi-key":"<your_key>"}
# OTP_SMS_BODY_TEMPLATE_JSON={"target":"{phone}"}
# In this provider, the OTP is generated by the provider and returned as `verify_code`.
# The backend will capture that code and store it hashed (it will NOT be returned to the client).
# OTP_SMS_PROVIDER_MODE=sms-verify3
# OTP_SMS_RESPONSE_VERIFY_CODE_FIELD=verify_code

# RapidAPI TextFlow SMS API (OTP mode)
# Uses two endpoints:
#   - POST https://textflow-sms-api.p.rapidapi.com/send-code
#   - POST https://textflow-sms-api.p.rapidapi.com/verify-code
# In this mode, the provider sends & verifies the OTP (the backend does NOT store an OTP hash).
#
# Required:
# OTP_SMS_PROVIDER_MODE=textflow
# OTP_SMS_HEADERS_JSON={"Content-Type":"application/json","X-RapidAPI-Key":"<your_key>","X-RapidAPI-Host":"textflow-sms-api.p.rapidapi.com"}
# OTP_TEXTFLOW_API_KEY=<your_textflow_api_key>
#
# Optional:
# OTP_TEXTFLOW_SERVICE_NAME="Vivian Loyalty"
# OTP_TEXTFLOW_EXPIRATION_SECONDS=300
# OTP_TEXTFLOW_SEND_URL=https://textflow-sms-api.p.rapidapi.com/send-code
# OTP_TEXTFLOW_VERIFY_URL=https://textflow-sms-api.p.rapidapi.com/verify-code

# ------------------------------------------------------------
# Twilio Verify (recommended)
#
# Create a Verify Service in Twilio Console, then set:
# OTP_SMS_PROVIDER_MODE=twilio_verify
# TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# TWILIO_AUTH_TOKEN=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# TWILIO_VERIFY_SERVICE_SID=VAxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# TWILIO_VERIFY_CHANNEL=sms
# ------------------------------------------------------------
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_VERIFY_SERVICE_SID=
TWILIO_VERIFY_CHANNEL=sms

# Optional: format local numbers to E.164 for your provider
# Example for Philippines: 09xxxxxxxxx -> +639xxxxxxxxx
OTP_SMS_COUNTRY_CODE=63
OTP_SMS_E164_PLUS=true

# If SMS is not configured/working, you can echo the OTP in development:
OTP_DEV_ECHO=true

# ------------------------------------------------------------
# Email OTP (SMTP) - used when requesting OTP with channel=email
#
# Gmail example:
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USERNAME=youraddress@gmail.com
# SMTP_PASSWORD=your_gmail_app_password
# SMTP_FROM=youraddress@gmail.com
# SMTP_USE_TLS=true
# ------------------------------------------------------------
SMTP_HOST=
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_FROM=
SMTP_USE_TLS=true

# Optional email templates
OTP_EMAIL_SUBJECT=Vivian Loyalty Verification Code
OTP_EMAIL_BODY_TEMPLATE=Your Vivian Loyalty verification code is {otp}. It expires in 5 minutes.
